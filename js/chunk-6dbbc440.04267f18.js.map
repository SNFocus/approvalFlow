{"version":3,"sources":["webpack:///./src/utils/render.js","webpack:///./src/views/custom/jsxPreview.vue?ad3a","webpack:///./src/views/custom/jsxPreview.vue","webpack:///./src/views/custom/jsxPreview.vue?fa65","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/core-js/modules/es.object.freeze.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///src/views/custom/jsxPreview.vue"],"names":["makeMap","attrStr","expectsLowerCase","attrs","split","map","Object","create","forEach","t","val","toLowerCase","isAttr","vModel","self","dataObject","value","props","on","input","$emit","change","componentChild","prepend","h","conf","key","append","options","list","item","push","label","disabled","optionType","border","buttonText","showTip","fileSize","sizeUnit","accept","render","confClone","JSON","parse","stringify","this","formData","style","children","childObjs","tag","keys","childFunc","undefined","includes","staticRenderFns","component","fails","module","exports","isExtensible","preventExtensions","$","FREEZING","isObject","onFreeze","nativeFreeze","freeze","FAILS_ON_PRIMITIVES","target","stat","forced","sham","it","hiddenKeys","has","defineProperty","f","uid","METADATA","id","setMetadata","objectID","weakData","fastKey","getWeakData","meta","REQUIRED","validator","ctx","confGlobal","formModel","rule","field","length","count","tabList","Array","isArray","callback","Error","trigger","type","required","buildRules","regList","rules","setData","prop","$set","_isMounted","colFormItem","buildData","defaultValue","$refs","formRef","validateField","isList","tableTitle","rowFormItem","justify","align","gutter","showDivider","cmpType","explain","divider","row","data","$route","params","tableRefs","drawerTitle","drawerText","drawerVisible","containerWidth","mounted","methods","submitForm","validate","isTableValid","title","message","position","console","log","resetForm","resetFields","resetTableData","checkTableData","res","valid","showExplain","explainText","buildDrawer","content","visible","buildForm","model","formRules","size","labelWidth","labelPosition","ref","formObject","btns"],"mappings":"kLAAMA,EAAU,SAAEC,EAASC,GACzB,IAAMC,EAAQF,EAAQG,MAAO,KACvBC,EAAMC,OAAOC,OAAQ,MAE3B,OADAJ,EAAMK,SAAS,SAAAC,GAAC,OAAIJ,EAAII,IAAK,KACtBP,EACL,SAAAQ,GAAG,OAAIL,EAAIK,EAAIC,gBACf,SAAAD,GAAG,OAAIL,EAAIK,KAITE,EAASZ,EACb,u3BAeF,SAASa,EAASC,EAAMC,EAAYC,GAClCD,EAAWE,MAAMD,MAAQA,EACzBD,EAAWG,GAAGC,MAAQ,SAAAT,GACpBI,EAAKM,MAAO,QAASV,IAGvBK,EAAWG,GAAGG,OAAS,SAAAX,GACrBI,EAAKM,MAAO,QAASV,IAIzB,IAAMY,EAAiB,CACrB,WAAY,CACVC,QADU,SACAC,EAAGC,EAAMC,GACjB,0BAAsB,WAAtB,CAAiCD,EAAKC,MAExCC,OAJU,SAIDH,EAAGC,EAAMC,GAChB,0BAAsB,UAAtB,CAAgCD,EAAKC,OAGzC,YAAa,CACXE,QADW,SACDJ,EAAGC,EAAMC,GACjB,IAAMG,EAAO,GAIb,OAHAJ,EAAKG,QAAQpB,SAAS,SAAAsB,GACpBD,EAAKE,KAAL,4BAA6BD,EAAKE,MAAlC,MAAgDF,EAAKd,MAArD,SAAsEc,EAAKG,gBAEtEJ,IAGX,iBAAkB,CAChBD,QADgB,SACNJ,EAAGC,EAAMC,GACjB,IAAMG,EAAO,GAKb,OAJAJ,EAAKG,QAAQpB,SAAS,SAAAsB,GACK,WAApBL,EAAKS,WAA0BL,EAAKE,KAAL,kCAAmCD,EAAKd,QAAxC,CAAgDc,EAAKE,SACpFH,EAAKE,KAAL,2BAA4BD,EAAKd,MAAjC,OAAgDS,EAAKU,SAArD,CAA8DL,EAAKE,YAEnEH,IAGX,oBAAqB,CACnBD,QADmB,SACTJ,EAAGC,EAAMC,GACjB,IAAMG,EAAO,GAQb,OAPAJ,EAAKG,QAAQpB,SAAS,SAAAsB,GACK,WAApBL,EAAKS,WACRL,EAAKE,KAAL,qCAAsCD,EAAKd,QAA3C,CAAmDc,EAAKE,SAExDH,EAAKE,KAAL,8BAA+BD,EAAKd,MAApC,OAAmDS,EAAKU,SAAxD,CAAiEL,EAAKE,YAGnEH,IAGX,YAAa,CACX,YAAa,SAAEL,EAAGC,EAAMC,GACtB,IAAMG,EAAO,GASb,MAR2B,iBAAtBJ,EAAK,aACRI,EAAKE,KAAL,aAAoB,kBAEpBF,EAAKE,KAAL,2BAA2B,QAA3B,KAAwC,UAAxC,KAAuD,mBAAvD,CAAyEN,EAAKW,cAE3EX,EAAKY,SACRR,EAAKE,KAAL,cAAqB,MAArB,MAAiC,kBAAjC,YAA2DN,EAAKa,SAAUb,EAAKc,SAA/E,KAA2Fd,EAAKe,OAAhG,QAEKX,KAKE,QACbtB,OADa,aAIbkC,OAJa,SAIJjB,GAAI,WACLkB,EAAYC,KAAKC,MAAOD,KAAKE,UAAWC,KAAKrB,OAC7CV,EAAa,CACjBZ,MAAO,GACPc,MAAO,CACL8B,SAAUD,KAAKC,SACf/B,MAAO8B,KAAK9B,OAAS0B,EAAU,iBAEjCxB,GAAI,GACJ8B,MAAO,IAEHC,EAAW,GAEXC,EAAY5B,EAAeoB,EAAUS,KAsB3C,OArBKD,GACH5C,OAAO8C,KAAMF,GAAY1C,SAAS,SAAAkB,GAChC,IAAM2B,EAAYH,EAAUxB,GACvBgB,EAAUhB,IACbuB,EAASlB,KAAMsB,EAAW7B,EAAGkB,EAAWhB,OAK9CpB,OAAO8C,KAAMV,GAAYlC,SAAS,SAAAkB,GAChC,IAAMhB,EAAMgC,EAAUhB,GACT,WAARA,EACHb,EAAQ,EAAME,EAAY,CAAC,UAAMuC,GAAWC,SAAS,EAAKvC,OAAS0B,EAAU,gBAAkB,EAAK1B,OAC1FD,EAAWW,GACrBX,EAAWW,GAAOhB,EACPE,EAAQc,GAGnBX,EAAWZ,MAAMuB,GAAOhB,EAFxBK,EAAWE,MAAMS,GAAOhB,KAKrBc,EAAGsB,KAAKrB,KAAK0B,IAAKpC,EAAYkC,IAEvChC,MAAO,CAAC,OAAQ,QAAS,c,kCCvI3B,yBAAikB,EAAG,G,+CCAhkBwB,EAAQe,E,YCAuV,S,wBDQ/VC,EAAY,eACd,EACAhB,EACAe,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,8BEnBf,IAAIC,EAAQ,EAAQ,QAEpBC,EAAOC,SAAWF,GAAM,WACtB,OAAOpD,OAAOuD,aAAavD,OAAOwD,kBAAkB,S,qBCHtD,IAAIC,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBN,EAAQ,EAAQ,QAChBO,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QAAkCA,SAErDC,EAAe7D,OAAO8D,OACtBC,EAAsBX,GAAM,WAAcS,EAAa,MAI3DJ,EAAE,CAAEO,OAAQ,SAAUC,MAAM,EAAMC,OAAQH,EAAqBI,MAAOT,GAAY,CAChFI,OAAQ,SAAgBM,GACtB,OAAOP,GAAgBF,EAASS,GAAMP,EAAaD,EAASQ,IAAOA,M,4CCbvE,IAAIC,EAAa,EAAQ,QACrBV,EAAW,EAAQ,QACnBW,EAAM,EAAQ,QACdC,EAAiB,EAAQ,QAAuCC,EAChEC,EAAM,EAAQ,QACdf,EAAW,EAAQ,QAEnBgB,EAAWD,EAAI,QACfE,EAAK,EAELpB,EAAevD,OAAOuD,cAAgB,WACxC,OAAO,GAGLqB,EAAc,SAAUR,GAC1BG,EAAeH,EAAIM,EAAU,CAAEhE,MAAO,CACpCmE,SAAU,OAAQF,EAClBG,SAAU,OAIVC,EAAU,SAAUX,EAAInE,GAE1B,IAAK0D,EAASS,GAAK,MAAoB,iBAANA,EAAiBA,GAAmB,iBAANA,EAAiB,IAAM,KAAOA,EAC7F,IAAKE,EAAIF,EAAIM,GAAW,CAEtB,IAAKnB,EAAaa,GAAK,MAAO,IAE9B,IAAKnE,EAAQ,MAAO,IAEpB2E,EAAYR,GAEZ,OAAOA,EAAGM,GAAUG,UAGpBG,EAAc,SAAUZ,EAAInE,GAC9B,IAAKqE,EAAIF,EAAIM,GAAW,CAEtB,IAAKnB,EAAaa,GAAK,OAAO,EAE9B,IAAKnE,EAAQ,OAAO,EAEpB2E,EAAYR,GAEZ,OAAOA,EAAGM,GAAUI,UAIpBlB,EAAW,SAAUQ,GAEvB,OADIV,GAAYuB,EAAKC,UAAY3B,EAAaa,KAAQE,EAAIF,EAAIM,IAAWE,EAAYR,GAC9EA,GAGLa,EAAO5B,EAAOC,QAAU,CAC1B4B,UAAU,EACVH,QAASA,EACTC,YAAaA,EACbpB,SAAUA,GAGZS,EAAWK,IAAY,G,w2DCrDvB,iCACE,MAAO,CACLS,UAAW,SAAf,OACM,IAAI/E,EAAMgF,EAAIA,EAAIC,WAAWC,WAAWC,EAAKC,OAC7C,GAAsC,IAAlCxF,OAAO8C,KAAK1C,GAAO,IAAIqF,OAA3B,CAKA,IAAIC,EAAQ,EACZvE,EAAKwE,QAAQzF,SAAQ,SAA3B,GACQE,GAAOwF,MAAMC,QAAQzF,EAAIgB,MAAUsE,GAAStF,EAAIgB,GAAKqE,WAEvDK,EAASJ,OAAQ1C,EAAY,IAAI+C,MAAM,GAA7C,8BARQD,KAUJE,QAAS,oFAAb,YACIC,KAAM,SACNC,UAAU,IAOd,SAASC,WAAT,UACE,QAAF,IAAM,KAAN,2GAAE,CACA,IAAF,SACE,GAAI,KAAN,UACI,IAAJ,qDACA,yEACA,IAAQ,UAAR,sCACiB,kBAAbhF,KAAK0B,IACT,yCACA,YAAM,UAAN,EAAM,KAAN,KAAM,QAAN,QAAM,QAAN,qGAGM,KAAN,sCACI1B,KAAKiF,QAAQlG,SAAQ,SAAzB,MACU,KAAV,SACQmG,MAAM5E,KAAK,CAAnB,gKAIE2D,IAAIiB,MAAMlF,KAAKZ,QAAU8F,OAI3B,IAAIC,QAAU,SAAd,+DACOC,GACLnB,EAAIoB,KAAKpB,EAAIA,EAAIC,WAAWC,WAAYiB,EAAMnG,IAG5CqG,YAAa,EAEjB,oDAEA,SACEC,YAAa,SAAf,qEACIP,WAAWhF,EAAMiE,IAChBqB,YAAcE,UAAUvB,EAAKjE,EAAKyF,aAAczF,EAAKZ,QACtD,IAAJ,KACQ,EAAR,6CACQ,IAAR,UACA,mHAAI,IACJ,cACM+F,QAAQlB,EAAKhF,EAAKe,EAAKZ,QACN,kBAAbY,EAAK0B,KAMPuC,EAAIyB,MAAMzB,EAAIC,WAAWyB,SAASC,cAAc5F,EAAKZ,QAA7D,gBAGA,2EAEA,EAFA,MAGA,aAHA,KAIA,WAJA,uEAMA,0BANA,KAOA,EAPA,MAQA,qCARA,IASA,oCATA,UAUA,SAKI,GAAIyG,EAAQ,CACV,IAAIC,EAAa,EAAvB,mIACM,MAAO,CAACA,EAAYzF,GAEtB,OAAOA,GAGT0F,YAAa,SAAf,OACI,GAAJ,qBACM,EAAN,sBACM,IAAN,0PACM,OAAN,wCAEIf,WAAWhF,EAAMiE,GACjB,IAWJ,EAEA,EAbA,GACMa,KAAoB,YAAd9E,EAAK8E,UAAqBjD,EAAY7B,EAAK8E,KACjDkB,QAAuB,YAAdhG,EAAK8E,UAAqBjD,EAAY7B,EAAKgG,QACpDC,MAAqB,YAAdjG,EAAK8E,UAAqBjD,EAAY7B,EAAKiG,MAClDC,OAA+B,kBAAhBlG,EAAKkG,OAAsBlG,EAAKkG,YAASrE,GAE9D,wMACA,IADA,CAEA,uDAAM,OAAN,gCAII,OAAI7B,EAAKmG,aAEc,WAAjBnG,EAAKoG,SAAwBpG,EAAKqG,UACpCA,EAAU,EAAlB,kFACA,eADA,UAEA,4CAFA,MAGA,0DAIMC,EAAU,EAAhB,sEACA,SADA,CACA,EADA,IACA,YAEa,CAACA,EAASC,IAEZA,IAKX,0BACEC,KADF,WACA,MACQtC,EAAa7C,KAAKoF,OAAOC,OAAOpF,UAAY,gDAApD,cAEI,OADAzC,OAAO8D,OAAOuB,GACP,EAAX,CACMyC,UAAW,GACXC,YAAa,GACbC,WAAY,GACZC,eAAe,EACfC,eAAgB,GAChB7C,WAAN,GANA,8IAOA,gBAPA,8IAQA,gBARA,GAWE8C,QAfF,WAgBI1B,YAAa,GAEf2B,QAAS,CACPC,WADJ,WACA,WACA,wBACM7F,KAAKqE,MAAMrE,KAAK6C,WAAWyB,SAASwB,UAAS,SAAnD,GACA,GACaC,IACL,EAAR,SACUC,MAAO,OACPC,QAAS,eACTC,SAAU,iBAEZC,QAAQC,IAAI,OAAQ,EAA5B,8BAKIC,UAhBJ,WAiBMrG,KAAKqE,MAAMrE,KAAK6C,WAAWyB,SAASgC,cACpCtG,KAAKuG,kBAGPA,eArBJ,WAqBA,WACM/I,OAAO8C,KAAKN,KAAKsF,WAAW5H,SAAQ,SAA1C,GAEA,uCAII8I,eA5BJ,WA4BA,WACA,KAKM,OAJAhJ,OAAO8C,KAAKN,KAAKsF,WAAW5H,SAAQ,SAA1C,GACQ,IAAR,mCACQ+I,EAAM,EAAd,qCAEaC,GAGTC,YArCJ,SAqCA,KACA,IACM3G,KAAKuF,YAAcS,EACnBhG,KAAKwF,WAAaoB,EAClB5G,KAAKyF,eAAgB,IAGvBoB,YA5CJ,SA4CA,cACUC,EAAU,EAApB,uDACM,OAAOpI,EAAE,YAAa,CACpBP,MAAO,CACL6H,MAAOhG,KAAKuF,YAAc,KAC1BwB,QAAS/G,KAAKyF,eAEhBrH,GAAI,CACF,iBAAkB,SAA5B,+BAGA,MAGI4I,UA1DJ,SA0DA,cAEA,GADA,8BACA,4EACA,GACQ7I,MAAO,CACL8I,MAAOjH,KAAKA,KAAK6C,WAAWC,WAC5Be,MAAO7D,KAAKA,KAAK6C,WAAWqE,WAC5BC,KAAMnH,KAAK6C,WAAWsE,KACtBC,WAAYpH,KAAK6C,WAAWuE,WAAa,KACzCC,cAAerH,KAAK6C,WAAWwE,oBAAiB7G,GAElD8G,IAAKtH,KAAK6C,WAAWyB,SAE7B,wDACA,qBADA,4BAEA,WAFA,UAEA,kBAFA,iCAGA,iBAHA,YAOM,OAAO5F,EAAE,UAAW6I,EAAY,CAACT,EAASU,MAI9C7H,OApGF,SAoGA,cACI,OAAO,EAAX,qGACA,wBADA,MACA,yBADA,CAEA,oBAFA,eAIA,gBAJA,2BAKA,GALA,IAKA,IALA,aAKA,iBALA,qBAKU,EAAV,eALA,QAOA","file":"js/chunk-6dbbc440.04267f18.js","sourcesContent":["const makeMap = ( attrStr, expectsLowerCase ) => {\n  const attrs = attrStr.split( ',' )\n  const map = Object.create( null )\n  attrs.forEach( t => map[t] = true )\n  return expectsLowerCase ?\n    val => map[val.toLowerCase()] :\n    val => map[val]\n}\n\n// 参考https://github.com/vuejs/vue/blob/v2.6.10/src/platforms/web/server/util.js\nconst isAttr = makeMap(\n  'accept,accept-charset,accesskey,action,align,alt,async,autocomplete,'\n  + 'autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,'\n  + 'checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,'\n  + 'name,contenteditable,contextmenu,controls,coords,data,datetime,default,'\n  + 'defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,'\n  + 'form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,'\n  + 'icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,'\n  + 'manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,'\n  + 'muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,'\n  + 'preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,'\n  + 'scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,'\n  + 'spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,'\n  + 'target,title,type,usemap,value,width,wrap'\n)\n\nfunction vModel ( self, dataObject, value ) {\n  dataObject.props.value = value\n  dataObject.on.input = val => {\n    self.$emit( 'input', val )\n  }\n  // 因为有些组件的v-model绑定的事件是change 所以这里也得监听\n  dataObject.on.change = val => {\n    self.$emit( 'input', val )\n  }\n}\n\nconst componentChild = {\n  'el-input': {\n    prepend ( h, conf, key ) {\n      return <template slot=\"prepend\">{conf[key]}</template>\n    },\n    append ( h, conf, key ) {\n      return <template slot=\"append\">{conf[key]}</template>\n    }\n  },\n  'el-select': {\n    options ( h, conf, key ) {\n      const list = []\n      conf.options.forEach( item => {\n        list.push( <el-option label={item.label} value={item.value} disabled={item.disabled}></el-option> )\n      } )\n      return list\n    }\n  },\n  'el-radio-group': {\n    options ( h, conf, key ) {\n      const list = []\n      conf.options.forEach( item => {\n        if ( conf.optionType === 'button' ) list.push( <el-radio-button label={item.value}>{item.label}</el-radio-button> )\n        else list.push( <el-radio label={item.value} border={conf.border}>{item.label}</el-radio> )\n      } )\n      return list\n    }\n  },\n  'el-checkbox-group': {\n    options ( h, conf, key ) {\n      const list = []\n      conf.options.forEach( item => {\n        if ( conf.optionType === 'button' ) {\n          list.push( <el-checkbox-button label={item.value}>{item.label}</el-checkbox-button> )\n        } else {\n          list.push( <el-checkbox label={item.value} border={conf.border}>{item.label}</el-checkbox> )\n        }\n      } )\n      return list\n    }\n  },\n  'el-upload': {\n    'list-type': ( h, conf, key ) => {\n      const list = []\n      if ( conf['list-type'] === 'picture-card' ) {\n        list.push( <i class=\"el-icon-plus\"></i> )\n      } else {\n        list.push( <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">{conf.buttonText}</el-button> )\n      }\n      if ( conf.showTip ) {\n        list.push( <div slot=\"tip\" class=\"el-upload__tip\">只能上传不超过 {conf.fileSize}{conf.sizeUnit} 的{conf.accept}文件</div> )\n      }\n      return list\n    }\n  }\n}\n\nexport default {\n  create(){\n\n  },\n  render ( h ) {\n    const confClone = JSON.parse( JSON.stringify( this.conf ) )\n    const dataObject = {\n      attrs: {},\n      props: {\n        formData: this.formData,\n        value: this.value || confClone['defaultValue']\n      },\n      on: {},\n      style: {}\n    }\n    const children = []\n\n    const childObjs = componentChild[confClone.tag]\n    if ( childObjs ) {\n      Object.keys( childObjs ).forEach( key => {\n        const childFunc = childObjs[key]\n        if ( confClone[key] ) {\n          children.push( childFunc( h, confClone, key ) )\n        }\n      } )\n    }\n\n    Object.keys( confClone ).forEach( key => {\n      const val = confClone[key]\n      if ( key === 'vModel' ) {\n        vModel( this, dataObject, [null, undefined].includes(this.value) ? confClone['defaultValue'] : this.value )\n      } else if ( dataObject[key] ) {\n        dataObject[key] = val\n      } else if ( !isAttr( key ) ) {\n        dataObject.props[key] = val\n      } else {\n        dataObject.attrs[key] = val\n      }\n    } )\n    return h( this.conf.tag, dataObject, children )\n  },\n  props: ['conf', 'value', 'formData']\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=style&index=0&id=313c2043&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=style&index=0&id=313c2043&lang=stylus&scoped=true&\"","var render, staticRenderFns\nimport script from \"./jsxPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./jsxPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./jsxPreview.vue?vue&type=style&index=0&id=313c2043&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"313c2043\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=script&lang=js&\"","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var $ = require('../internals/export');\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\n\nvar nativeFreeze = Object.freeze;\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeFreeze(1); });\n\n// `Object.freeze` method\n// https://tc39.github.io/ecma262/#sec-object.freeze\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  freeze: function freeze(it) {\n    return nativeFreeze && isObject(it) ? nativeFreeze(onFreeze(it)) : it;\n  }\n});\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","<script>\nimport render from '@/utils/render.js'\nimport mockData from '../admin/mockData.js'\nimport { trigger } from '@/components/DynamicForm/components/generator/config.js'\n/**\n * 校验组织机构组件是否为空\n */\nconst setFcOrgSelectRule = ( conf, ctx ) => {\n  return { \n    validator: (rule, value, callback) => {\n      var val = ctx[ctx.confGlobal.formModel][rule.field]\n      if (Object.keys(val || {}).length === 0) {\n        callback()\n        return\n      }\n\n      var count = 0\n      conf.tabList.forEach(key => {\n        val && Array.isArray(val[key]) && (count += val[key].length)\n      })\n      callback(count ? undefined : new Error(`${conf.title}不能为空`))\n    }, \n    trigger: trigger[conf.tag],\n    type: 'object',\n    required: true, \n  }\n}\n/**\n * 收集表单必填项并组装成ElementUI表单校验得rules选项\n * 表格除外 表格自带校验\n */\nfunction buildRules ( conf, ctx ) {\n  if ( conf.vModel === undefined ||  !trigger[conf.tag]) return\n  const rules = []\n  if ( conf.required ) {\n    const type = Array.isArray( conf.defaultValue ) ? 'array' : undefined\n    let message = Array.isArray( conf.defaultValue ) ? `请至少选择一个` : conf.placeholder\n    if ( message === undefined ) message = `${conf.label}不能为空`\n    conf.tag === 'fc-org-select'\n      ? rules.push( setFcOrgSelectRule( conf, ctx ) )\n      : rules.push( { required: true, type, message, trigger: trigger[conf.tag] } )\n  }\n  // 自定义正则匹配\n  if ( conf.regList && Array.isArray( conf.regList ) ) {\n    conf.regList.forEach( item => {\n      if ( item.pattern ) {\n        rules.push( { pattern: eval( item.pattern ), message: item.message, trigger: trigger[conf.tag] } )\n      }\n    } )\n  }\n  ctx.rules[conf.vModel] = rules\n}\n\n\nvar setData = (ctx, val, prop, init = false) => {\n  if (!prop) return\n  ctx.$set(ctx[ctx.confGlobal.formModel], prop, val)\n}\n\nvar _isMounted = false // 收集默认值 渲染完成之后防止重复收集默认值\n\nconst buildData = (ctx, value, prop) => setData(ctx, value, prop, true)\n\nconst layouts = {\n  colFormItem: function (conf,  h, ctx, isList = false,) {\n    buildRules(conf, ctx)\n    !_isMounted && buildData(ctx, conf.defaultValue, conf.vModel)\n    let labelWidth = ''\n    if ( conf.labelWidth ) labelWidth = `${conf.labelWidth}px`\n    if ( isList ) labelWidth = \"0px\"\n    const required = ( !trigger[conf.tag] && conf.required ) || conf.tag === 'fc-org-select' \n    const handleInput = val => {\n      setData(ctx, val, conf.vModel)\n      if (conf.tag === 'fc-org-select') {\n        /**\n         * 组织机构组件数据复杂 \n         * async-validator不一定能准确捕获到数据变化 \n         * 所以在这里手动校验一次\n         */\n        ctx.$refs[ctx.confGlobal.formRef].validateField(conf.vModel,()=>{ })\n      }\n    }\n    let item =  <el-col span={conf.span}>\n                  <el-form-item \n                  label-width={labelWidth} \n                  label={isList ? '' : conf.label} \n                  prop={conf.vModel}>\n                    <render\n                    formData={ctx[ctx.confGlobal.formModel]}\n                    conf={conf} \n                    value={ctx[ctx.confGlobal.formModel][conf.vModel]} \n                    ref={conf.rowType === 'table' ? conf.vModel : undefined} \n                    onInput={handleInput} \n                    />\n                  </el-form-item>\n                </el-col>\n\n    if (isList) {\n      var tableTitle = <el-col span={24} style=\"font-size: 14px;padding:6px 0px;margin-bottom: 4px;border-bottom: 1px solid #e5e5e5;\">{conf.label}</el-col>\n      return [tableTitle, item]\n    }\n    return item\n  },\n\n  rowFormItem: function (conf, h, ctx) {\n     if ( conf.rowType === 'table' ) {\n       ctx.tableRefs[conf.vModel] = conf\n       const param = {...conf, config: conf, formSize: ctx.confGlobal.size, labelWidth: `${conf.labelWidth || ctx.confGlobal.labelWidth}px`}\n       return this.colFormItem( param, h, ctx, conf.type === 'list' )\n    }\n    buildRules(conf, ctx)\n    const props = {\n      type: conf.type === 'default' ? undefined : conf.type,\n      justify: conf.type === 'default' ? undefined : conf.justify,\n      align: conf.type === 'default' ? undefined : conf.align,\n      gutter: typeof conf.gutter === 'number' ? conf.gutter : undefined,\n    }\n    let row = <el-col span={conf.span || 24}>\n                <el-row {...{ props: props }}>\n                  { Array.isArray(conf.children) && conf.children.map( ( el ) => layouts[el.layout]( el, h, ctx ) ) }\n                </el-row>\n              </el-col>\n    let divider\n    if (conf.showDivider) {\n      let explain\n      if (conf.cmpType === 'custom' && conf.explain) {\n        explain = <el-tooltip effect=\"dark\" content=\"组件说明\" placement=\"top\">\n                    <i class=\"el-icon-info\"\n                      onClick={ctx.showExplain.bind(this, conf.explain, conf.label)}\n                      style=\"margin-right: 8px; color: #E6A23C;cursor: pointer;\">\n                    </i>\n                  </el-tooltip>\n      }\n      divider = <el-col span={24}>\n                  <el-divider content-position=\"left\" >{explain} {conf.label}</el-divider>\n                </el-col>\n      return [divider, row]\n    } \n    return row\n  },\n}\n\n\nexport default {\n  data () {\n    var confGlobal = this.$route.params.formData || mockData.formData\n    Object.freeze(confGlobal)\n    return {\n      tableRefs: {},\n      drawerTitle: '',\n      drawerText: '',\n      drawerVisible: false,\n      containerWidth: 66,\n      confGlobal,\n      [confGlobal.formModel]: {},\n      [confGlobal.formRules]: {}\n    }\n  },\n  mounted(){\n    _isMounted = true\n  },\n  methods: {\n    submitForm () {\n      const isTableValid = this.checkTableData()\n      this.$refs[this.confGlobal.formRef].validate(valid => {\n        if(!valid) return\n        if (!isTableValid) return\n        this.$notify({\n          title: '表单数据',\n          message: '请在控制台中查看数据输出',\n          position: 'bottom-right'\n        });\n        console.log('表单数据', this[this.confGlobal.formModel])\n        // TODO 提交表单\n      })\n    },\n\n    resetForm() {\n      this.$refs[this.confGlobal.formRef].resetFields()\n      this.resetTableData()\n    },\n\n    resetTableData(){\n      Object.keys(this.tableRefs).forEach(vModel => {\n        // 由于render.js返回的动态组件 所以动态组件相当于是render的子组件\n        const res = this.$refs[vModel]['$children'][0].reset()\n      })\n    },\n\n    checkTableData () {\n      let valid = true\n      Object.keys(this.tableRefs).forEach(vModel => {\n        const res = this.$refs[vModel].$children[0].submit()  // 返回false或表单数据\n        res ? (this[this.confGlobal.formModel][vModel] = res) : (valid = false)\n      })\n      return valid\n    },\n\n    showExplain (explainText, title) {\n      if(!explainText) return\n      this.drawerTitle = title\n      this.drawerText = explainText\n      this.drawerVisible = true\n    },\n\n    buildDrawer (h) {\n      var content = <pre style=\"padding-left: 1rem;\">{this.drawerText}</pre>\n      return h('el-drawer', {\n        props: {\n          title: this.drawerTitle + '说明',\n          visible: this.drawerVisible,\n        },\n        on: {\n          'update:visible': val => this.drawerVisible = val\n        }\n      },\n      [content])\n    },\n\n    buildForm (h) {\n      let labelPosition = this.confGlobal.labelPosition || 'left'\n      const content = this.confGlobal.fields.map(c => layouts[c.layout](c, h, this))\n      const formObject = {\n        props: {\n          model: this[this.confGlobal.formModel],\n          rules: this[this.confGlobal.formRules],\n          size: this.confGlobal.size,\n          labelWidth: this.confGlobal.labelWidth + 'px',\n          labelPosition: this.confGlobal.labelPosition || undefined\n        },\n        ref: this.confGlobal.formRef\n      }\n      const btns = <el-col span={24}>\n                    <el-form-item  style=\"text-align:right;\">\n                      <el-button type=\"primary\" onClick={this.submitForm}>提交</el-button>\n                      <el-button onClick={this.resetForm}>重置</el-button>\n                    </el-form-item>\n                  </el-col>\n      // 因为使用jsx时  el-form 的 model 一直无法正确填充，故采用createElement直接渲染\n      return h('el-form', formObject, [content, btns]) \n    }\n  },\n\n  render (h) {\n    return  <div class=\"preview-container\" style={'width:' + this.containerWidth + '%;'}>\n              <el-row gutter={this.confGlobal.gutter} style=\"padding: 2rem 2rem 0;\">\n                {this.buildForm(h)}\n              </el-row>\n              <div  class=\"width-slider\">\n                <el-slider vModel={this.containerWidth} min={30} max={96}></el-slider>\n              </div>\n              {this.buildDrawer(h)}\n            </div>\n  }\n}\n</script>\n<style lang=\"stylus\" scoped>\n.preview-container \n  margin 3rem auto 1rem\n  border-radius 6px\n  box-shadow 0 0 15px rgba(0, 0, 0, .1)\n  \n  .width-slider\n    width  150px\n    position absolute\n    top 0\n    right 2rem\n\n.showDivider.form-container { \n  margin-bottom: 2rem; \n}\n</style>\n"],"sourceRoot":""}